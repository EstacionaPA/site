{"filter":false,"title":"sql_service.php","tooltip":"/php/SQL/sql_service.php","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":51,"column":80},"end":{"row":51,"column":81},"action":"insert","lines":["r"],"id":2100}],[{"start":{"row":51,"column":81},"end":{"row":51,"column":82},"action":"insert","lines":["!"],"id":2101}],[{"start":{"row":51,"column":68},"end":{"row":51,"column":81},"action":"remove","lines":["Administrador"],"id":2102},{"start":{"row":51,"column":68},"end":{"row":51,"column":75},"action":"insert","lines":["suporte"]}],[{"start":{"row":103,"column":11},"end":{"row":103,"column":17},"action":"remove","lines":["static"],"id":2103}],[{"start":{"row":113,"column":11},"end":{"row":113,"column":17},"action":"remove","lines":["static"],"id":2104}],[{"start":{"row":132,"column":11},"end":{"row":132,"column":17},"action":"remove","lines":["static"],"id":2105}],[{"start":{"row":143,"column":11},"end":{"row":143,"column":17},"action":"remove","lines":["static"],"id":2106}],[{"start":{"row":152,"column":11},"end":{"row":152,"column":17},"action":"remove","lines":["static"],"id":2107}],[{"start":{"row":171,"column":11},"end":{"row":171,"column":17},"action":"remove","lines":["static"],"id":2108}],[{"start":{"row":190,"column":11},"end":{"row":190,"column":17},"action":"remove","lines":["static"],"id":2109}],[{"start":{"row":103,"column":11},"end":{"row":103,"column":12},"action":"remove","lines":[" "],"id":2110}],[{"start":{"row":113,"column":10},"end":{"row":113,"column":11},"action":"remove","lines":[" "],"id":2111}],[{"start":{"row":132,"column":10},"end":{"row":132,"column":11},"action":"remove","lines":[" "],"id":2112}],[{"start":{"row":143,"column":11},"end":{"row":143,"column":12},"action":"remove","lines":[" "],"id":2113}],[{"start":{"row":152,"column":10},"end":{"row":152,"column":11},"action":"remove","lines":[" "],"id":2114}],[{"start":{"row":171,"column":10},"end":{"row":171,"column":11},"action":"remove","lines":[" "],"id":2115}],[{"start":{"row":190,"column":11},"end":{"row":190,"column":12},"action":"remove","lines":[" "],"id":2116}],[{"start":{"row":48,"column":35},"end":{"row":48,"column":48},"action":"remove","lines":["->fetch_row()"],"id":2117}],[{"start":{"row":48,"column":23},"end":{"row":48,"column":36},"action":"remove","lines":["$resultQuery;"],"id":2126},{"start":{"row":48,"column":23},"end":{"row":48,"column":82},"action":"insert","lines":["self::validateSQLExecutes($resultQuery->fetch_row(), 'no');"]}],[{"start":{"row":48,"column":62},"end":{"row":48,"column":74},"action":"remove","lines":[">fetch_row()"],"id":2127}],[{"start":{"row":48,"column":61},"end":{"row":48,"column":62},"action":"remove","lines":["-"],"id":2128}],[{"start":{"row":48,"column":64},"end":{"row":48,"column":66},"action":"remove","lines":["no"],"id":2129},{"start":{"row":48,"column":64},"end":{"row":48,"column":65},"action":"insert","lines":["y"]}],[{"start":{"row":48,"column":65},"end":{"row":48,"column":66},"action":"insert","lines":["e"],"id":2130}],[{"start":{"row":48,"column":66},"end":{"row":48,"column":67},"action":"insert","lines":["s"],"id":2131}],[{"start":{"row":182,"column":12},"end":{"row":184,"column":33},"action":"remove","lines":["$relatInfUser = mysql_query($sql);","        ","            return $relatInfUser;"],"id":2132},{"start":{"row":182,"column":12},"end":{"row":182,"column":13},"action":"insert","lines":["r"]}],[{"start":{"row":182,"column":13},"end":{"row":182,"column":14},"action":"insert","lines":["e"],"id":2133}],[{"start":{"row":182,"column":14},"end":{"row":182,"column":15},"action":"insert","lines":["t"],"id":2134}],[{"start":{"row":182,"column":15},"end":{"row":182,"column":16},"action":"insert","lines":["u"],"id":2135}],[{"start":{"row":182,"column":16},"end":{"row":182,"column":17},"action":"insert","lines":["r"],"id":2136}],[{"start":{"row":182,"column":17},"end":{"row":182,"column":18},"action":"insert","lines":["n"],"id":2137}],[{"start":{"row":182,"column":18},"end":{"row":182,"column":19},"action":"insert","lines":[" "],"id":2138}],[{"start":{"row":182,"column":19},"end":{"row":182,"column":20},"action":"insert","lines":["$"],"id":2139}],[{"start":{"row":182,"column":20},"end":{"row":182,"column":21},"action":"insert","lines":["s"],"id":2140}],[{"start":{"row":182,"column":21},"end":{"row":182,"column":22},"action":"insert","lines":["q"],"id":2141}],[{"start":{"row":182,"column":22},"end":{"row":182,"column":23},"action":"insert","lines":["l"],"id":2142}],[{"start":{"row":182,"column":23},"end":{"row":182,"column":24},"action":"insert","lines":[";"],"id":2143}],[{"start":{"row":197,"column":8},"end":{"row":199,"column":31},"action":"remove","lines":["$relatBoardXCar = mysql_query($sql);","        ","        return $relatBoardXCar;"],"id":2144},{"start":{"row":197,"column":8},"end":{"row":197,"column":9},"action":"insert","lines":["r"]}],[{"start":{"row":197,"column":9},"end":{"row":197,"column":10},"action":"insert","lines":["e"],"id":2145}],[{"start":{"row":197,"column":10},"end":{"row":197,"column":11},"action":"insert","lines":["t"],"id":2146}],[{"start":{"row":197,"column":11},"end":{"row":197,"column":12},"action":"insert","lines":["u"],"id":2147}],[{"start":{"row":197,"column":12},"end":{"row":197,"column":13},"action":"insert","lines":["r"],"id":2148}],[{"start":{"row":197,"column":13},"end":{"row":197,"column":14},"action":"insert","lines":["n"],"id":2149}],[{"start":{"row":197,"column":14},"end":{"row":197,"column":15},"action":"insert","lines":[" "],"id":2150}],[{"start":{"row":197,"column":15},"end":{"row":197,"column":16},"action":"insert","lines":["$"],"id":2151}],[{"start":{"row":197,"column":16},"end":{"row":197,"column":17},"action":"insert","lines":["s"],"id":2152}],[{"start":{"row":197,"column":17},"end":{"row":197,"column":18},"action":"insert","lines":["q"],"id":2153}],[{"start":{"row":197,"column":18},"end":{"row":197,"column":19},"action":"insert","lines":["l"],"id":2154}],[{"start":{"row":197,"column":19},"end":{"row":197,"column":20},"action":"insert","lines":[";"],"id":2155}],[{"start":{"row":19,"column":18},"end":{"row":19,"column":19},"action":"remove","lines":["("],"id":2156}],[{"start":{"row":19,"column":13},"end":{"row":19,"column":18},"action":"remove","lines":["isset"],"id":2157}],[{"start":{"row":19,"column":20},"end":{"row":19,"column":21},"action":"remove","lines":[")"],"id":2158}],[{"start":{"row":19,"column":20},"end":{"row":19,"column":21},"action":"insert","lines":["="],"id":2159}],[{"start":{"row":19,"column":21},"end":{"row":19,"column":22},"action":"insert","lines":["="],"id":2160}],[{"start":{"row":19,"column":22},"end":{"row":19,"column":23},"action":"insert","lines":["1"],"id":2161}],[{"start":{"row":203,"column":4},"end":{"row":500,"column":2},"action":"remove","lines":["/*","    public static function updateUser($user, $column, $valueColumn){","        ","        $update = \"UPDATE pessoas SET \" . $column . \" = '$valueColumn' WHERE usuario = '$user';\";","        $valid = mysql_query($update);","    ","        return $valid;","    }","    //------------------------REQUISIÇÕES--------------------------","","    //Requisita o ID do usuario","    //operation/cad_cars.php","    public static function requestIDUser($user){","        ","        $sql = \"SELECT id FROM pessoas","                WHERE usuario = '$user';\";","        ","        $query = mysql_query($sql);","        $result = mysql_result($query, 0);","        ","        return $result;","        ","    }","    ","    //Requisita o ID da marca","    //ThisFunction.requestModel & operation/cad_cars.php","    public static function requestIDMarca($marca){","        ","        $sql = \"SELECT id FROM marca","                WHERE nome = '$marca';\";","        ","        $query = mysql_query($sql);","        $result = mysql_result($query, 0);","        ","        return $result;","    }","    ","    //Requisita o ID do modelo","    //operation/cad_cars.php","    public static function requestIDModelo($mod){","        ","        $sql = \"SELECT id FROM modelo","                WHERE nome = '$mod';\";","        ","        $query = mysql_query($sql);","        $result = mysql_result($query, 0);","        ","        return $result;","    }","    ","    //Requisita o nome de um determinado usuário","    //login/name_user.php","    public static function requestName($usuario) {","        ","        $sql = \"SELECT nome FROM pessoas ","                WHERE usuario ='$usuario'\";","    ","        $query = mysql_query($sql);","        $result = mysql_result($query, 0);","        ","        return $result;","        ","    }","    ","    //Requisita todas as marcas de carros existentes no banco de dados","    //operation/cad_cars_values_option","    public static function requestMark(){","        ","        $sql = \"SELECT nome FROM marca","                ORDER BY nome;\";","        ","        $query = mysql_query($sql);","        return $query;    ","        ","    }","    ","    //Requisita todos os modelos de carros existentes no banco de dados","    //operation/cad_cars_values_option","    public static function requestModel($markValue){","        ","        $idMark = requestIDMarca($markValue);","        ","        $sql = \"SELECT nome FROM modelo","                WHERE marca_id = $idMark","                ORDER BY nome;\";","        ","        $query = mysql_query($sql);","        return $query;","        ","    }","    ","    //--------------------------INSERTS--------------------------","    ","    //Registra os dados de cadastro de um usuário","    //operation/insert_user.php","    public static function insertUsers($nome, $usuario, $criptografada, $email, ","                        $cpf, $end, $num, $comp, $bairro, $cep, ","                        $cidade, $estado, $tel, $cel, $acesso) {","    ","        $insert = mysql_query(","            \"insert into pessoas ","            (","             nome, usuario, senha, email, cpf, endereco, ","             numero, complemento, bairro, cep, cidade, estado, telefone, celular, acesso","            ) ","            values","            (","                '{$nome}','{$usuario}','{$criptografada}',","                '{$email}','{$cpf}','{$end}','{$num}','{$comp}',","                '{$bairro}','{$cep}','{$cidade}','{$estado}','{$tel}',","                '{$cel}','{$acesso}'","            )\"","        );","        ","        if($insert) ","            return '1';","        else ","            return '10';","    }","    ","    //Requista os dados do cadastro de um carro","    //operation/cad_cars.php","    public static function insertCar($user, $placa, $marca, $mod){","        ","        $sql = \"INSERT INTO carro","                (placa, marca_id, pessoas_id, modelo_id)","                values","                ('{$placa}', '{$marca}', '{$user}', '{$mod}')\";","            ","        $insert = mysql_query($sql);","        return $insert . mysql_error();","    }","        ","    //--------------------------UPDATE--------------------------","    ","    //Registra os dados de um usuário alterados pelo admin","    //operation/edit_users.php","    public static function updateUser($user, $column, $valueColumn){","        ","        $update = \"UPDATE pessoas SET \" . $column . \" = '$valueColumn' WHERE usuario = '$user';\";","        $valid = mysql_query($update);","    ","        return $valid;","    }","    ","    //--------------------------DELETE --------------------------","    ","    //Função de deletar um determinado usuário","    //operation/delet_user","    public static function deletUser($user){","        ","        $sql = \"DELETE FROM pessoas WHERE usuario = '$user';\";","         ","        $delet = mysql_query($sql);","        ","        if($delet==1)","            return \"ok\";","        else","            return mysql_error();","     ","    }","    ","    //--------------------------VALIDAÇÕES--------------------------","    ","    //Checa se somente o usuário existe","    //login/valid_login.php & operation/cad_car.php & operation/edit_users.php","    public static function checkUser($user){","            ","        $sql = \"SELECT count(*) FROM pessoas ","                  WHERE usuario = '$user'\";","    ","        $resultUser = mysql_query($sql);","        $row = mysql_fetch_array($resultUser);","        ","        //","        if($row[0] > 0) return \"existe\";","        else return \"nao existe\";","    }","    ","    //Função para checar PLACA","    //operation/cad_cars.php","    public static function checkPlaca($placa){","        ","        $sql = \"SELECT count(*) FROM carro","                  WHERE placa = '$placa'\";","    ","        $result = mysql_query($sql);","        $row = mysql_fetch_array($result);","        ","        if($row[0] > 0) return \"existe\";","        else return \"nao existe\";","        ","    }","    ","    //Função para checar a marca","    //operation/cad_cars.php","   public static function checkMarca($marca){","        $sql = \"SELECT count(*) FROM marca","                  WHERE nome = '$marca'\";","    ","        $result = mysql_query($sql);","        $row = mysql_fetch_array($result);","        ","        //","        if($row[0] > 0) return \"existe\";","        else return \"nao existe\";","    }","    ","    //Função para checar o modelo","    //operation/cad_cars.php","    public static function checkModelo($mod){","        $sql = \"SELECT count(*) FROM modelo","                  WHERE nome = '$mod'\";","    ","        $result = mysql_query($sql);","        $row = mysql_fetch_array($result);","        ","        //","        if($row[0] > 0) return \"existe\";","        else return \"nao existe\";","    }","    ","    //Realiza a confirmação se usuário e senhas estão válidos","    //login/valid_login.php","    public static function checkUserPass($usuario, $senhaCriptografada) ","    {","        ","        if($usuario == '' || $senhaCriptografada == '') return false;","        ","        $user = \"SELECT count(*) FROM pessoas ","                  WHERE( usuario ='$usuario' ","                            AND ","                         senha ='$senhaCriptografada')\";","        ","        //envia o comando ao SQL","        $resultUser = mysql_query($user);","        ","        //transforma a retorno da consulta em um array","        $row = mysql_fetch_array($resultUser);","    ","        //se existir a primeira posição do array","        if($row[0] > 0) return \"existe\";","        else return \"no\";","    ","    }","    ","    //--------------------------RELATORIOS--------------","    ","    //Realiza a consulta de informações de um determinado usuário","    //operation/relat_inf_user.php","    public static function relatInfUser($name){","        ","        $sql =   ","            \"select p.nome, p.celular, p.cidade, c.placa, ma.nome as marca, ","                    mo.nome as modelo","            from carro  c","            join pessoas p on c.pessoas_id = p.id","            join marca ma on ma.id = c.marca_id","            join modelo mo on mo.id = c.modelo_id","            where p.nome like '%$name%';\";","            ","            $relatInfUser = mysql_query($sql);","        ","            return $relatInfUser;","    }","    ","    ","    //Realiza a consulta de carros por placa","    //ARRUMAR NOME!!","    //operation/relat_boardXcar.php","    public static function relatBordXCar($board){","        ","        $sql = \"SELECT p.nome, p.telefone, ma.nome, mo.nome","                FROM carro c","                JOIN pessoas p ON p.id = c.pessoas_id","                JOIN modelo mo on mo.id = c.modelo_id","                JOIN marca ma on ma.id = c.marca_id","                WHERE c.placa = '$board';\";","        ","        $relatBoardXCar = mysql_query($sql);","        ","        return $relatBoardXCar;","            ","    }","    ","    // Realiza a consulta de clientes por estado","    public static function relatgraf (){","        $sql = \"SELECT count(*), p.estado","                FROM pessoas p","                GROUP BY p.estado\";","            ","        $relatgraf = mysql_query($sql);","            ","        return $relatgraf;","    }","","}","*/"],"id":2162}],[{"start":{"row":203,"column":0},"end":{"row":203,"column":4},"action":"remove","lines":["    "],"id":2163}],[{"start":{"row":202,"column":4},"end":{"row":203,"column":0},"action":"remove","lines":["",""],"id":2164}],[{"start":{"row":202,"column":0},"end":{"row":202,"column":4},"action":"remove","lines":["    "],"id":2165}],[{"start":{"row":201,"column":1},"end":{"row":202,"column":0},"action":"remove","lines":["",""],"id":2166}],[{"start":{"row":190,"column":29},"end":{"row":190,"column":30},"action":"insert","lines":["a"],"id":2168}],[{"start":{"row":190,"column":29},"end":{"row":190,"column":30},"action":"remove","lines":["a"],"id":2169}],[{"start":{"row":190,"column":29},"end":{"row":190,"column":30},"action":"insert","lines":[" "],"id":2170}],[{"start":{"row":190,"column":30},"end":{"row":190,"column":31},"action":"insert","lines":["a"],"id":2171}],[{"start":{"row":190,"column":31},"end":{"row":190,"column":32},"action":"insert","lines":["s"],"id":2172}],[{"start":{"row":190,"column":32},"end":{"row":190,"column":33},"action":"insert","lines":[" "],"id":2173}],[{"start":{"row":190,"column":33},"end":{"row":190,"column":34},"action":"insert","lines":["'"],"id":2174}],[{"start":{"row":190,"column":34},"end":{"row":190,"column":35},"action":"insert","lines":["n"],"id":2175}],[{"start":{"row":190,"column":35},"end":{"row":190,"column":36},"action":"insert","lines":["o"],"id":2176}],[{"start":{"row":190,"column":36},"end":{"row":190,"column":37},"action":"insert","lines":["m"],"id":2177}],[{"start":{"row":190,"column":37},"end":{"row":190,"column":38},"action":"insert","lines":["e"],"id":2178}],[{"start":{"row":190,"column":38},"end":{"row":190,"column":39},"action":"insert","lines":["'"],"id":2179}],[{"start":{"row":190,"column":60},"end":{"row":190,"column":61},"action":"insert","lines":[" "],"id":2180}],[{"start":{"row":190,"column":61},"end":{"row":190,"column":62},"action":"insert","lines":["a"],"id":2181}],[{"start":{"row":190,"column":62},"end":{"row":190,"column":63},"action":"insert","lines":["s"],"id":2182}],[{"start":{"row":190,"column":63},"end":{"row":190,"column":64},"action":"insert","lines":[" "],"id":2183}],[{"start":{"row":190,"column":64},"end":{"row":190,"column":65},"action":"insert","lines":["'"],"id":2184}],[{"start":{"row":190,"column":65},"end":{"row":190,"column":66},"action":"insert","lines":["m"],"id":2185}],[{"start":{"row":190,"column":66},"end":{"row":190,"column":67},"action":"insert","lines":["a"],"id":2186}],[{"start":{"row":190,"column":67},"end":{"row":190,"column":68},"action":"insert","lines":["r"],"id":2187}],[{"start":{"row":190,"column":68},"end":{"row":190,"column":69},"action":"insert","lines":["c"],"id":2188}],[{"start":{"row":190,"column":69},"end":{"row":190,"column":70},"action":"insert","lines":["a"],"id":2189}],[{"start":{"row":190,"column":70},"end":{"row":190,"column":71},"action":"insert","lines":["'"],"id":2190}],[{"start":{"row":190,"column":71},"end":{"row":190,"column":72},"action":"insert","lines":[" "],"id":2191}],[{"start":{"row":190,"column":81},"end":{"row":190,"column":82},"action":"insert","lines":[" "],"id":2192}],[{"start":{"row":190,"column":82},"end":{"row":190,"column":83},"action":"insert","lines":["a"],"id":2193}],[{"start":{"row":190,"column":83},"end":{"row":190,"column":84},"action":"insert","lines":["s"],"id":2194}],[{"start":{"row":190,"column":84},"end":{"row":190,"column":85},"action":"insert","lines":[" "],"id":2195}],[{"start":{"row":190,"column":85},"end":{"row":190,"column":86},"action":"insert","lines":["'"],"id":2196}],[{"start":{"row":190,"column":86},"end":{"row":190,"column":87},"action":"insert","lines":["m"],"id":2197}],[{"start":{"row":190,"column":87},"end":{"row":190,"column":88},"action":"insert","lines":["o"],"id":2198}],[{"start":{"row":190,"column":88},"end":{"row":190,"column":89},"action":"insert","lines":["d"],"id":2199}],[{"start":{"row":190,"column":89},"end":{"row":190,"column":90},"action":"insert","lines":["e"],"id":2200}],[{"start":{"row":190,"column":90},"end":{"row":190,"column":91},"action":"insert","lines":["l"],"id":2201}],[{"start":{"row":190,"column":91},"end":{"row":190,"column":92},"action":"insert","lines":["o"],"id":2202}],[{"start":{"row":190,"column":92},"end":{"row":190,"column":93},"action":"insert","lines":["'"],"id":2203}],[{"start":{"row":174,"column":69},"end":{"row":174,"column":70},"action":"insert","lines":["'"],"id":2204}],[{"start":{"row":174,"column":75},"end":{"row":174,"column":76},"action":"insert","lines":["'"],"id":2205}],[{"start":{"row":174,"column":76},"end":{"row":174,"column":77},"action":"insert","lines":["'"],"id":2206}],[{"start":{"row":174,"column":76},"end":{"row":174,"column":77},"action":"remove","lines":["'"],"id":2207}],[{"start":{"row":175,"column":31},"end":{"row":175,"column":32},"action":"insert","lines":["'"],"id":2208}],[{"start":{"row":175,"column":38},"end":{"row":175,"column":39},"action":"insert","lines":["'"],"id":2209}],[{"start":{"row":43,"column":0},"end":{"row":43,"column":1},"action":"insert","lines":["3"],"id":2212}],[{"start":{"row":43,"column":0},"end":{"row":44,"column":0},"action":"remove","lines":["            ",""],"id":2211}]]},"ace":{"folds":[],"scrolltop":405,"scrollleft":0,"selection":{"start":{"row":43,"column":0},"end":{"row":43,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":12,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1457911635000,"hash":"747b2642efe7f636fabbc26afde5cf77efe52ae8"}